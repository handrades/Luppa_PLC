# Luppa Inventory System - Development Environment Configuration
# Copy this file to .env and adjust values for your local development environment

# ================================
# GENERAL APPLICATION SETTINGS
# ================================

# Application environment
NODE_ENV=development

# Logging configuration
LOG_LEVEL=debug

# ================================
# DATABASE CONFIGURATION (PostgreSQL)
# ================================

# PostgreSQL connection settings
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
POSTGRES_DB=luppa_dev
POSTGRES_USER=postgres
POSTGRES_PASSWORD=dev_password

# PostgreSQL authentication method
POSTGRES_HOST_AUTH_METHOD=scram-sha-256

# Database connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000
DB_QUERY_TIMEOUT=30000

# Application Database Configuration (used by TypeORM)
# These DB_* variables are used by the application for database connections
# Note: POSTGRES_* variables above are for Docker container configuration
DB_HOST=localhost
DB_PORT=5433
DB_NAME=luppa_dev
DB_USER=postgres
DB_PASSWORD=dev_password
DB_SSL_MODE=disable
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=600000

# ================================
# REDIS CONFIGURATION
# ================================

# Redis connection settings
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=dev_redis_password

# Redis memory and performance settings
REDIS_MAX_MEMORY=256mb
REDIS_EVICTION_POLICY=allkeys-lru

# Redis session configuration
REDIS_SESSION_PREFIX=luppa:session:
REDIS_SESSION_TTL=3600

# ================================
# API SERVICE CONFIGURATION
# ================================

# API server settings
API_PORT=3010
API_HOST=0.0.0.0

# CORS configuration
ALLOWED_ORIGINS=http://localhost:3010,http://localhost:3100,http://localhost:3000,http://localhost:5173,http://localhost:4173
CORS_CREDENTIALS=true
CORS_ORIGIN=http://localhost:3100

# JWT authentication settings
JWT_SECRET=dev-jwt-secret-a9f8d2e5c1b7934e6f0a8b2d4c9e7f1a3b5d8e2f4c7a9b1d6e3f8c5a2b9d4e7f1a3c6b8e
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# Session configuration
SESSION_SECRET=dev_session_secret_change_in_production
SESSION_MAX_AGE=3600000

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# File upload settings
UPLOAD_MAX_FILE_SIZE=10485760
UPLOAD_MAX_FILES=5
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,application/pdf,text/csv

# ================================
# WEB SERVICE CONFIGURATION
# ================================

# Frontend development server
WEB_PORT=5174

# Vite configuration
VITE_API_URL=http://localhost:3010/api/v1
VITE_APP_TITLE="Luppa Inventory"
VITE_APP_VERSION=dev
VITE_LOG_LEVEL=debug

# Feature flags for frontend
VITE_ENABLE_DEBUG_TOOLS=true
VITE_ENABLE_MOCK_DATA=false
VITE_ENABLE_AUTO_REFRESH=true

# ================================
# NGINX REVERSE PROXY
# ================================

# Nginx external port
NGINX_PORT=3011

# ================================
# DOCKER CONFIGURATION
# ================================

# Docker Compose project name
COMPOSE_PROJECT_NAME=luppa-dev

# Container resource limits
API_MEMORY_LIMIT=1g
API_CPU_LIMIT=1.0
WEB_MEMORY_LIMIT=1g
WEB_CPU_LIMIT=1.0
POSTGRES_MEMORY_LIMIT=512m
POSTGRES_CPU_LIMIT=0.5
REDIS_MEMORY_LIMIT=512m
REDIS_CPU_LIMIT=0.5
NGINX_MEMORY_LIMIT=128m
NGINX_CPU_LIMIT=0.25

# Volume configurations
POSTGRES_DATA_PATH=./data/postgres
REDIS_DATA_PATH=./data/redis
LOGS_PATH=./logs

# ================================
# SECURITY SETTINGS
# ================================

# Password requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=false

# Account lockout settings
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=900000

# Security headers
SECURITY_ENABLE_HELMET=true
SECURITY_ENABLE_CORS=true
SECURITY_ENABLE_RATE_LIMITING=true

# ================================
# PLC INVENTORY SPECIFIC SETTINGS
# ================================

# PLC communication settings
PLC_DEFAULT_TIMEOUT=5000
PLC_DEFAULT_RETRIES=3
PLC_SCAN_INTERVAL=30000

# Equipment discovery
ENABLE_AUTO_DISCOVERY=true
DISCOVERY_NETWORK_RANGE=192.168.1.0/24
DISCOVERY_PORT_RANGE=502,2404,44818

# Data retention settings
AUDIT_LOG_RETENTION_DAYS=365
COMMUNICATION_LOG_RETENTION_DAYS=30
ERROR_LOG_RETENTION_DAYS=90

# Backup settings (for future implementation)
BACKUP_ENABLED=false
BACKUP_INTERVAL=daily
BACKUP_RETENTION_COUNT=7

# ================================
# MONITORING AND OBSERVABILITY
# ================================

# Health check settings
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# Metrics collection
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Application performance monitoring
APM_ENABLED=false
APM_SERVICE_NAME=luppa-plc-inventory
APM_ENVIRONMENT=development

# ================================
# DEVELOPMENT TOOLS
# ================================

# Hot reload settings
ENABLE_HOT_RELOAD=true
WATCH_EXTENSIONS=ts,tsx,js,jsx,json

# Development database seeding
ENABLE_DEV_SEED_DATA=true
SEED_ADMIN_EMAIL=admin@luppa.local
SEED_ADMIN_PASSWORD=admin123

# Testing configuration
TEST_DATABASE_URL=postgresql://postgres:test_password@localhost:5434/luppa_test
TEST_REDIS_URL=redis://localhost:6381
TEST_TIMEOUT=30000

# Debug settings
DEBUG_SQL_QUERIES=false
DEBUG_REDIS_COMMANDS=false
DEBUG_HTTP_REQUESTS=false

# ================================
# PRODUCTION OVERRIDES
# ================================
# These settings should be overridden in production environments

# IMPORTANT: Change these values in production!
# JWT_SECRET=your_production_jwt_secret_here
# SESSION_SECRET=your_production_session_secret_here
# POSTGRES_PASSWORD=your_secure_postgres_password
# REDIS_PASSWORD=your_secure_redis_password

# Production database settings
# POSTGRES_HOST=your_production_db_host
# POSTGRES_SSL_MODE=require
# POSTGRES_SSL_CERT=/path/to/client-cert.pem
# POSTGRES_SSL_KEY=/path/to/client-key.pem
# POSTGRES_SSL_CA=/path/to/ca-cert.pem

# Production Redis settings
# REDIS_HOST=your_production_redis_host
# REDIS_TLS=true
# REDIS_TLS_CERT=/path/to/client-cert.pem
# REDIS_TLS_KEY=/path/to/client-key.pem
# REDIS_TLS_CA=/path/to/ca-cert.pem

# Production CORS settings
# CORS_ORIGIN=https://your-production-domain.com

# Production logging
# LOG_LEVEL=info
# LOG_FILE_ENABLED=true
# LOG_FILE_PATH=/var/log/luppa/app.log
